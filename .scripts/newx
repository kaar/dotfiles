#!/usr/bin/env bash

set -o errexit
set -o nounset
set -o pipefail

if [ -z "${SCRIPTS:-}" ]; then
  echo "SCRIPTS not set"
  exit 1
fi

if [ -z "${1:-}" ]; then
  echo "usage: $0 <name>"
  exit 1
fi

path="${SCRIPTS}/${1}"

if [ ! -e "${path}" ]; then
  cat <<EOF > "${path}"
#!/usr/bin/env bash
set -o errexit
set -o nounset
set -o pipefail
EOF
  chmod +x "${path}"
fi

"${EDITOR:-vi}" +2 "${path}"
